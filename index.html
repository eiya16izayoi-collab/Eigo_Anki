<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>abceed Style Test</title>
    <style>
        :root { --primary-color: #48bb78; --bg-color: #f8fafc; --card-bg: #ffffff; --text-main: #2d3748; }
        body { font-family: 'Helvetica Neue', Arial, sans-serif; background-color: var(--bg-color); color: var(--text-main); display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        #app { width: 100%; max-width: 400px; padding: 20px; box-sizing: border-box; }
        
        /* カードデザイン */
        .card { background: var(--card-bg); border-radius: 24px; padding: 32px; box-shadow: 0 10px 25px rgba(0,0,0,0.05); text-align: center; }
        
        /* プログレスバー */
        .progress-container { width: 100%; height: 6px; background: #edf2f7; border-radius: 10px; margin-bottom: 30px; overflow: hidden; }
        #progress-bar { width: 0%; height: 100%; background: var(--primary-color); transition: width 0.3s ease; }

        .question-word { font-size: 36px; font-weight: 800; margin-bottom: 24px; color: #1a202c; letter-spacing: -0.5px; }
        
        input[type="text"] { width: 100%; padding: 16px; font-size: 18px; border: 2px solid #e2e8f0; border-radius: 16px; text-align: center; margin-bottom: 20px; box-sizing: border-box; transition: border-color 0.2s; outline: none; }
        input[type="text"]:focus { border-color: var(--primary-color); }

        .btn-main { width: 100%; padding: 16px; background: var(--primary-color); color: white; border: none; border-radius: 16px; cursor: pointer; font-size: 18px; font-weight: bold; transition: transform 0.1s, opacity 0.2s; }
        .btn-main:active { transform: scale(0.98); }
        .btn-main:disabled { opacity: 0.6; cursor: not-allowed; }

        #result-message { font-size: 20px; font-weight: bold; margin-bottom: 15px; min-height: 1.5em; }
        .hint-text { color: #a0aec0; font-size: 14px; margin-top: 10px; }
        .wrong-item { text-align: left; padding: 12px; border-bottom: 1px solid #edf2f7; display: flex; justify-content: space-between; }
        .exit-link { margin-top: 25px; display: block; color: #a0aec0; font-size: 14px; text-decoration: none; cursor: pointer; }
    </style>
</head>
<body>

<div id="app">
    <div id="ui-header" style="display:none;">
        <div class="progress-container"><div id="progress-bar"></div></div>
    </div>

    <div id="start-screen" class="card">
        <div style="background: #e6fffa; color: #38a169; width: 60px; height: 60px; line-height: 60px; border-radius: 50%; margin: 0 auto 20px; font-weight: bold; font-size: 24px;">A</div>
        <h1 style="font-size: 24px; margin-bottom: 8px;">Word Master</h1>
        <p style="color: #718096; margin-bottom: 32px;">今日の111単語を特訓</p>
        <button class="btn-main" onclick="startApp()">学習を開始する</button>
    </div>

    <div id="quiz-screen" class="card" style="display:none;">
        <div id="word-count" style="font-size: 12px; color: #a0aec0; margin-bottom: 10px;">0 / 0</div>
        <div class="question-word" id="word-display">...</div>
        <input type="text" id="user-input" placeholder="意味を入力" autocomplete="off">
        <div id="result-message"></div>
        <button id="action-btn" class="btn-main" onclick="handleAction()">判定する</button>
        <a class="exit-link" onclick="showResult()">途中で辞める</a>
    </div>

    <div id="result-screen" class="card" style="display:none;">
        <h2 style="margin-top:0;">学習の記録</h2>
        <div id="score-display" style="font-size: 40px; font-weight: bold; color: var(--primary-color); margin: 20px 0;">0%</div>
        <p id="stats-text" style="color: #718096; margin-bottom: 24px;"></p>
        <div id="wrong-area" style="display:none; text-align: left;">
            <p style="font-weight: bold; font-size: 14px; color: #e53e3e; border-bottom: 2px solid #fff5f5; padding-bottom: 8px;">要復習リスト</p>
            <div id="wrong-list" style="max-height: 200px; overflow-y: auto;"></div>
        </div>
        <button class="btn-main" onclick="location.reload()" style="margin-top:24px; background: #4a5568;">終了して戻る</button>
    </div>
</div>

<script>
const rawData = `
barely,かろうじて
deprive,から〜を奪う
gap,隔たり・隙間
obstacles,障害（物）
breath,呼吸、息
gesture,しぐさ、身ぶり
nod,うなずき、会釈
seize,を(急に強く)つかむ
stretch,を伸ばす、引っ張る
yell,どなる、わめく
arrest,を逮捕する
commit,を犯す
guilty,有罪の
incident,事件
innocent,罪のない、無罪の
jail,留置所
prison,刑務所
proof,証拠
suicide,自殺(的行為)
witness,目撃者・証人
abundant,豊富な
amount,量・額
calculat,(を)計算する
equal,(〜に)等しい
excess,過剰
numerous,多数の
proportion,割合
quantity,分量・数量
total,合計の
volume,量・容積、((1巻))
destination,目的地
depart,出発する
port,港
guide,案内人・ガイド
heaven,天国
hunt,狩り
voyage,(宇宙)旅行
reserve,予約する
rest,休む
cancel,を取り消す
decrease,減少する
expand,を拡大する
extend,を延長する
restrict,を制限する
rise,増加する
aside,わきへ
edges,端・ふち
internal,内部の
nearby,近くの
surface,表面
general,一般の
abstract,抽象的な
complex,複雑な
mild,穏やかな
plain,わかりやすい
sharp,とがった
sort,種類
standards,標準・基準
ordinary,平凡な
extent,程度
extraordinary,並外れた
extreme,極端な
highly,非常に
huge,ばく大な
incredible,信じられない(ほどの)
intense,強烈な、激しい
severe,深刻な
initial,最初の
sequence,順番
series,ひと続き
absent,欠席して(いる)
aloud,声に出して
attend,に出席する
educate,を教育する
facilities,施設・設備
institute,研究所
scholarship,奨学金
victory,勝利
tournament,トーナメント
defeat,を負かす
bunch,房
dozen,ダース
per,あたり
pound(s),ポンド
sheet,1枚
current,現在の
former,以前の
lately,最近
previous,前の
recall,を思い出す
atmosphere,雰囲気
bound,～行きの
district,地区
exit,出口
foundation,基礎・土台
surround,を囲む
benefits,利点、利益
miracle,奇跡
overcome,(を)克服する
progress,進歩
bare,むき出しの
beard,あごひげ
cells,細胞
lung,肺
muscle,筋肉
organ,器官
oxygen,酸素
skin,肌
souls,魂
vision,視力
ceremony,式
formal,正式な
occasion,機会・場合
participate,(に)参加する
present,出席している
prize,賞
commercial,商業的な
service,サービス
construct,を建設する
transport,を輸送する
`;

const allWords = rawData.trim().split('\n').map(line => {
    const [en, jp] = line.split(',');
    return { en: en.trim(), jp: jp.trim() };
});

let currentList = [];
let currentIndex = 0;
let correctCount = 0;
let wrongItems = [];
let isAnswered = false;

function startApp() {
    currentList = [...allWords].sort(() => Math.random() - 0.5);
    currentIndex = 0; correctCount = 0; wrongItems = [];
    document.getElementById('start-screen').style.display = "none";
    document.getElementById('quiz-screen').style.display = "block";
    document.getElementById('ui-header').style.display = "block";
    setupQuestion();
}

function setupQuestion() {
    isAnswered = false;
    const item = currentList[currentIndex];
    document.getElementById('word-display').innerText = item.en;
    document.getElementById('word-count').innerText = `${currentIndex + 1} / ${currentList.length}`;
    document.getElementById('user-input').value = "";
    document.getElementById('user-input').disabled = false;
    document.getElementById('result-message').innerText = "";
    document.getElementById('action-btn').innerText = "判定する";
    document.getElementById('action-btn').style.background = "#48bb78";
    
    // プログレスバー更新
    const progress = ((currentIndex) / currentList.length) * 100;
    document.getElementById('progress-bar').style.width = `${progress}%`;
    
    setTimeout(() => document.getElementById('user-input').focus(), 10);
}

function handleAction() {
    if (!isAnswered) checkAnswer();
    else nextQuestion();
}

document.getElementById('user-input').addEventListener('keypress', (e) => {
    if (e.key === 'Enter') handleAction();
});

function checkAnswer() {
    const userAns = document.getElementById('user-input').value.trim();
    const correctAns = currentList[currentIndex].jp;
    const msg = document.getElementById('result-message');
    const btn = document.getElementById('action-btn');
    
    isAnswered = true;
    document.getElementById('user-input').disabled = true;
    btn.innerText = "次へ";
    btn.style.background = "#4a5568";

    if (userAns === correctAns) {
        msg.innerText = "Excellent!";
        msg.style.color = "#38a169";
        correctCount++;
    } else {
        msg.innerHTML = `<span style="font-size:14px; color:#a0aec0;">正解:</span><br>${correctAns}`;
        msg.style.color = "#e53e3e";
        wrongItems.push(currentList[currentIndex]);
    }
}

function nextQuestion() {
    currentIndex++;
    if (currentIndex < currentList.length) {
        setupQuestion();
    } else {
        showResult();
    }
}

function showResult() {
    document.getElementById('quiz-screen').style.display = "none";
    document.getElementById('ui-header').style.display = "none";
    document.getElementById('result-screen').style.display = "block";
    
    const solved = isAnswered ? currentIndex + 1 : currentIndex;
    const percent = solved === 0 ? 0 : Math.round((correctCount / solved) * 100);
    
    document.getElementById('score-display').innerText = `${percent}%`;
    document.getElementById('stats-text').innerText = `${solved}問中 ${correctCount}問正解`;
    
    if (wrongItems.length > 0) {
        document.getElementById('wrong-area').style.display = "block";
        const list = document.getElementById('wrong-list');
        list.innerHTML = wrongItems.map(item => `
            <div class="wrong-item">
                <span style="font-weight:bold;">${item.en}</span>
                <span style="color:#718096;">${item.jp}</span>
            </div>
        `).join('');
    }
}
</script>
</body>
</html>
